<!DOCTYPE html>
<html>
  <head>
    <title>Flourish API: CSV Example</title>
    <script src="https://d3js.org/d3-dsv.v1.min.js"></script>
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
    <script src="https://cdn.flourish.rocks/flourish-live-v5.min.js"></script>
  </head>

  <body>
    <div id="chart"></div>
    <script>
    d3.csv("example-data.csv").then(function(raw_data) {
      var my_visualisation = new Flourish.Live({
        template: "@flourish/scatter",
        version: "22",
        container: "#chart",
        api_key: "************ YOUR API KEY GOES HERE! ************",
        state: {
          layout: {
            title: "This chart was generated from an external CSV file",
            subtitle: "The CSV file was imported from a local csv using D3, and turned into a chart using the Flourish API"
          }
        },
        data: {
          data: raw_data
        },
        bindings: {
          data: {
            x: "Life expectancy",
            y: "GDP",
            color: "Region",
            size: "Population",
            name: ["Country"]
          }
        }
      });
    });
    </script>
  </body>
</html>
